<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Maps JavaScript API Example: Simple Polygon</title>
    <script src="http://maps.google.com/maps?file=api&amp;v=2.x&amp;key=ABQIAAAA-O3c-Om9OcvXMOJXreXHAxQGj0PqsCtxKvarsoS-iqLdqZSKfxS27kJqGZajBjvuzOBLizi931BUow"
      type="text/javascript"></script>
    <script src="states.js" type="text/javascript"></script>
    <script type="text/javascript">
    var map;
    var gameTimer;
    var gameSeconds = 0;
    var gameTime = 30;
    var currentStateCode;

    function initialize() {
      if (GBrowserIsCompatible()) {
        map = new GMap2(document.getElementById("map_canvas"));
        map.setCenter(new GLatLng(42, -99), 3);
        map.addControl(new GSmallMapControl());
        console.log(stateCodes.length);
       	for (stateCode in stateBorders) { 
          var polygon = createPoly(stateCode);
          map.addOverlay(polygon);
        }
        var randomNum = Math.floor(Math.random()*stateCodes.length);
      }
    }   
  
    function createPoly(stateCode) {
       var polygon = new GPolygon(stateBorders[stateCode], "#f33f00", 0, 0, "#ff0000", 0.01);
       GEvent.addListener(polygon, "click", function(latlng) {
         if (inGame() && stateCode == currentStateCode) {
           map.openInfoWindow(latlng, "You clicked " + stateCode);
           showNextState();
         }
       });
       return polygon;
    }

    function startGame() {
      gameSeconds = 0;
      currentScore = 0;
      clearInterval(gameTimer);
      showNextState();
      gameTimer = setInterval(updateTime, 1000);
      updateTime();
    }

    function showNextState() {
      var randomNum = Math.floor(Math.random()*stateCodes.length);
      alert(randomNum);
      currentStateCode = stateCodes[randomNum].code;
      console.log(currentStateCode);
      alert(currentStateCode);
    }

    function endGame() {
      clearInterval(gameTimer);
    }

    function updateTime() {
      console.log(gameSeconds);
      gameSeconds++;
    }
    function inGame() { 
      return gameSeconds > 0 && gameSeconds < gameTime;
    }

   
    </script>
  </head>

  <body onload="initialize()" onunload="GUnload()">
    <div id="map_canvas" style="width: 500px; height: 300px"></div>
     <input type="button" onclick="startGame()" value="Start New Game" />
    <br/>
  </body>
</html>

