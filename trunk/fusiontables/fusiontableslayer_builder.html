<!DOCTYPE html> 

<!--
  copyright (c) 2011 Google inc.

  You are free to copy and use this sample.
  License can be found here: http://code.google.com/apis/ajaxsearch/faq/#license
-->
<html>

<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 

<title>FusionTablesLayer Builder</title>

<style>
	body { font-family: Arial, sans-serif; padding-left: 10px; }
	h2 { font-size: 18px; clear: both; }
	.formelement { clear: both; margin-bottom: 15px; }
	#specifics { clear: both; }
	.right { float: right; }
	.left {float: left; }
	label { clear: both; }
	.selected { 
		border-top: 1px solid;
		border-left: 1px solid;
		border-right: 1px solid;
	}
	.notselected {
		border-bottom: 1px solid;
	}
	.goog-slider {
		border: solid 1px #CCCCCC;
		background-color: white;
		position: relative;
		overflow: hidden;
		width: 150px;
		height: 15px;
	}
	.goog-slider-thumb {
		position: absolute;
		background-color: #3399CC;
		overflow: hidden;
		width: 10px;
		height: 100%;
		top: 0;
	}
</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="script/closure/closure/goog/base.js"></script> 
<script>
goog.require('goog.dom');
goog.require('goog.ui.Slider');
goog.require('goog.ui.Component');
</script>

<script type="text/javascript" src="script/builder.js"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12846745-15']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body onload="initialize(); initializeMap();">

<h1>FusionTablesLayer Builder</h1>

<p>This wizard helps you create the HTML for a map with a FusionTablesLayer
and search element (either text-based search or select menu). After creating
your map, you can copy and paste the HTML code in the textarea below
to display the map on your own website! Please submit bug reports here:
<a href="http://code.google.com/p/fusiontableslayer-builder/issues/list">Issue Tracker</a></p>

<div style="float:left; width: 375px; margin: 0 50px 20px 0;">
		
	<h2 style="margin-bottom: 0;">Add layer</h2>
	<p style="margin-top: 0px;"><small style="color: #666666;"><i>Table needs to be public or unlisted.</i></small></p>
	<div class="formelement">
		<label>Your table id: </label><input type="text" id="tableid" class="right" onblur="fillSelectColumns();" />
	</div>
	<div class="formelement">
		<label>Location Column: </label><select id="locationColumn" class="right" disabled="disabled">
			<option value="">--Select--</option>
		</select>
	</div>
	<div class="formelement">
		<label>Filter (optional): </label>
		<div class="right">WHERE <input type="text" id="filter" /></div>
	</div>
	<div class="formelement">
		<input type="button" onclick="addLayer();" value="Add Layer" class="right" />
	</div>
	
	<h2>Edit Map</h2>
	<div class="formelement">
		<label>Dimensions:</label>
		<div class="right">
			W: <input type="text" id="mapwidth" style="width: 35px;" /> px,
			H: <input type="text" id="mapheight" style="width: 35px;" /> px
		</div>
	</div>
	<div class="formelement">
		<label>Map Center: </label><input type="text" id="mapCenter" class="right" />
	</div>
	<div class="formelement">
		<label>Zoom: </label> <input type="text" id="mapZoom" class="right" />
	</div>
	<div class="formelement">
		<input type="button" onclick="editMap();" value="Update Map" class="right" />
	</div>
	
	<h2>Style Map</h2>
	<div class="formelement">
		<label>Show: </label>
		<div class="right" style="width: 200px;">
		  <div class="right">
		    <input type="checkbox" id="allfeatures" checked="checked" onclick="styleMapAll()" /> All features<br />
		    <a href="javascript:specs();">More options</a>
		  </div>
		</div>
		<div id="specifics" style="display: none;">
		  <br style="clear: both;" />
		  <form name="specform">
		    <div class="left" style="margin: 0px 5px 15px 0px;">
		      <b>Roads</b><br />
			    <input type="checkbox" name="specs" id="road.highway" checked="checked" onclick="styleMap()" /> Highways<br />
			    <input type="checkbox" name="specs" id="road.arterial" checked="checked" onclick="styleMap()" /> Arterial<br />
			    <input type="checkbox" name="specs" id="road.local" checked="checked" onclick="styleMap()" /> Local
		    </div>
		    <div class="left" style="margin: 0px 5px 15px 0px;">
		      <b>Administrative</b><br />
			    <input type="checkbox" name="specs" id="administrative.country" checked="checked" onclick="styleMap()" /> Country<br />
			    <input type="checkbox" name="specs" id="administrative.province" checked="checked" onclick="styleMap()" /> Province<br />
			    <input type="checkbox" name="specs" id="administrative.locality" checked="checked" onclick="styleMap()" /> Locality<br />
			    <input type="checkbox" name="specs" id="administrative.neighborhood" checked="checked" onclick="styleMap()" /> Neighborhood<br />
			    <input type="checkbox" name="specs" id="administrative.land_parcel" checked="checked" onclick="styleMap()" /> Land parcel
		    </div>
		    <div class="left" style="margin: 0px 5px 15px 0px;">
		      <b>Other</b><br />
			    <input type="checkbox" name="specs" id="poi" checked="checked" onclick="styleMap()" /> Point of Interest<br />
			    <input type="checkbox" name="specs" id="transit" checked="checked" onclick="styleMap()" /> Transit
		    </div>
		  </form>
		</div>
	</div><br />
	<div class="formelement">
		<label>Saturation:</label>
		<div class="right">
		  <div class="left">Gray&nbsp;</div>
		  <div id="s1" class="goog-slider left"> 
			  <div class="goog-slider-thumb"></div> 
		  </div>
		  <div class="left">&nbsp;Bright</div>
		</div>
	</div>
	
	<h2>Add another feature</h2>
  <select id="addFeature" onchange="showDiv(this.value)">
    <option value="">--SELECT--</option>
    <option value="layer">Another layer</option>
    <option value="text">Text-based search</option>
    <option value="select">Select-menu search</option>
  </select><br /><br />
  
  <div id="layer" style="display: none; clear: both;">
    <form>
      <div class="formelement">
	      <label>Second table id: </label><input type="text" id="anotherTableid" class="right" onblur="fillAnotherSelectColumns();" />
	    </div>
	    <div class="formelement">
	      <label>Location Column: </label><select id="anotherLocationColumn" class="right" disabled="disabled">
		      <option value="">--Select--</option>
	      </select>
	    </div>
	    <div class="formelement">
	      <label>Filter (optional): </label>WHERE <input type="text" id="anotherFilter" class="right" />
      </div>
      <div class="formelement" style="text-align: right;">
        <input type="reset" value="Reset" onclick="resetAddFeature()" class="right" />
	      <input type="button" onclick="addAnotherLayer();" value="Add Layer" class="right" />
	    </div>
	  </form>
	</div>
	
	<div id="text" style="display: none; clear: both;">
	  <form>
	    <div class="formelement">
		    <label>Text Label: </label><input type="text" id="textQueryLabel" class="right" />
	    </div>
	    <div class="formelement">
		    <label>Column to query: </label><select id="textQueryColumn" class="right" disabled="true">
			    <option selected="selected" value="">--Select--</option>
		    </select>
	    </div>
	    <div class="formelement" style="text-align: right;">
		    <input type="button" onclick="addQuery();" value="Add Search" />
		    <input type="reset" value="Reset" onclick="resetAddFeature()" />
		  </div>
		</form>
	</div>
	
	<div id="select" style="display: none; clear: both;">
	  <form>
	    <div class="formelement">
		    <label>Select Label: </label><input type="text" id="selectQueryLabel" class="right" />
	    </div>
	    <div class="formelement">
		    <label>Column to query: </label><select id="selectQueryColumn" class="right" disabled="true">
			    <option selected="selected" value="">--Select--</option>
		    </select>
	    </div>
	    <div class="formelement" style="text-align: right;">
		    <input type="button" onclick="addSelectQuery();" value="Add Search" />
        <input type="reset" value="Reset" onclick="resetAddFeature()" />
	    </div>
		</form>
	</div>
	
</div>

<div id="map_section" style="float: left;">
	<h2>Preview</h2>
	<div id="map_canvas"></div>
</div>

<div style="clear: both;">
  <h2>Your HTML</h2>
	<textarea id="htmlCode" style="width: 900px; height: 600px;"></textarea>
</div>

</body>

</html>
