<!DOCTYPE html> 
<!--
  copyright (c) 2011 Google inc.

  You are free to copy and use this sample.
  License can be found here: http://code.google.com/apis/ajaxsearch/faq/#license

-->
<html> 
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 

<title>Google Maps JavaScript API v3 Example: Fusion Tables Layer</title> 

<style>
  body { font-family: Arial, sans-serif; }
  #map_canvas { height: 800px; width:900px; }
  
  #large {
		display: none;
		position: absolute;
		background: #FFFFFF;
		padding: 20px;
		z-index: 10;
		min-height: 200px;
		min-width: 500px;
		color: #336699;
		-moz-border-radius: 15px;
		border-radius: 15px;
	}
	
	#background {
		display: none;
		position: absolute;
		height: 100%;
		width: 100%;
		top: 0;
		left: 0;
		background: #000000;
		z-index: 1;
	}
	
	#close {
	  margin: 0px;
	  cursor: pointer;
	}
	
	#mug {
		float: left;
		margin: 0 10px 10px 0;
	}
	
	h2 {
		padding: 0px;
		margin: 0px;
	}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
<script type="text/javascript">

var tableid = 411160;
  
function initialize() {
  var map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: new google.maps.LatLng(37.4, -110.1),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  
  var layer = new google.maps.FusionTablesLayer(tableid);
  layer.setMap(map);
  layer.setOptions({suppressInfoWindows: true});
  
  google.maps.event.addListener(layer, 'click', function(e) {
  	$("#background").css({"opacity" : "0.7"})
                            .fadeIn("slow");
 
		$("#large").html("<p style='float:right' id='close'>[X]</p>" +
										 "<img id='mug' src='images/face.jpg' /><h2>" + e.row['name'].value + "<br />" + 
										 e.row['cid'].value + "</h2>" +
										 "<p style='clear:both'>Voting history:</p>" + 
										 "<p>Bill 3: " + e.row['h2011-3.xml'].value + "<br />" +
										 "Bill 4: " + e.row['h2011-4.xml'].value + "</p>" +
										 "<p><a href='" + e.row['url'].value + "'>Website</a></p>" +
										 "<br /><small>*Image courtesy of <a href='http://www.flickr.com/photos/katerha/'>katerha</a></small>")
					 .center()
					 .fadeIn("slow");
  });
}

jQuery.fn.center = function () {
	this.css("position","absolute");
	this.css("top", ( $(window).height() - this.height() ) / 2+$(window).scrollTop() + "px");
	this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
	return this;
}
 
$(document).ready(function() {	
	$("#background #close").click(function(){
		$("#background").fadeOut("slow");
		$("#large").fadeOut("slow");
	});
	
	$(document).keypress(function(e){
		if(e.keyCode==27) {
			$("#background").fadeOut("slow");
			$("#large").fadeOut("slow");
		}
	});
	
	$("#large").click(function(){
		$("#background").fadeOut("slow");
		$("#large").fadeOut("slow");
	});

});


</script> 


</head> 
<body onload="initialize();"> 
  <div id="map_canvas"></div>
  <div id="large"></div>
  <div id="background"></div>
</body> 
</html> 

